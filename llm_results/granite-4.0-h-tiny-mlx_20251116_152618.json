{
  "model": "granite-4.0-h-tiny-mlx",
  "base_url": "http://localhost:1234",
  "timestamp": "2025-11-16T15:25:36.584213",
  "sensitivity": 1.0,
  "migraine_tests": [
    {
      "scenario_name": "Clear LOW - Minimal risk",
      "description": "Perfect weather, no risk factors",
      "weighted_score": 0.0,
      "expected": "LOW",
      "predicted": "LOW",
      "correct": true,
      "confidence": 0.95,
      "rationale": "All weather factors are within normal ranges and show no significant changes. Temperature change is 0\u00b0C, humidity is moderate at 50%, pressure remains stable at 1013 hPa with no low pressure (<995 hPa), precipitation is absent, and cloud cover is clear. None of the factors exceed their respective risk thresholds.",
      "analysis": "The weather conditions are stable with no significant changes in temperature, humidity, pressure, precipitation, or cloud cover. All factors are within normal limits and below their respective risk thresholds.",
      "adjusted_thresholds": {
        "high": 0.7,
        "medium": 0.4
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a migraine risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON.\n\nMIGRAINE TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% or \u226430% is moderate risk, \u226585% or \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk, \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights):\n- Pressure change: 30% (most important - rapid pressure changes are the strongest migraine trigger)\n- Temperature change: 25% (rapid temperature swings trigger migraines)\n- Low pressure: 15% (low pressure systems increase migraine risk)\n- Humidity extremes: 15% (very high or very low humidity)\n- Cloud cover: 10% (overcast conditions affect some people)\n- Precipitation: 5% (rain and storms can contribute)\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (pressure drops, temperature swings) are more important than absolute values\n- Changes can be positive (+) or negative (-), indicating direction of change\n- Consider both the magnitude of changes AND the min/max ranges provided\n- Large ranges (e.g., temperature_range, pressure_range) indicate weather instability\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Clear LOW - Minimal risk\nRisk scores: {\"temperature_change\": 0.0, \"humidity_extreme\": 0.0, \"pressure_change\": 0.0, \"pressure_low\": 0.0, \"precipitation\": 0.0, \"cloud_cover\": 0.0, \"weights\": {\"temperature_change\": 0.25, \"humidity_extreme\": 0.15, \"pressure_change\": 0.3, \"pressure_low\": 0.15, \"precipitation\": 0.05, \"cloud_cover\": 0.1}}\nWeighted score: 0.00 (LOW<0.40, MEDIUM:0.40-0.69, HIGH\u22650.70)\nWeather: temp avg 20.0\u00b0C, pressure avg 1013.0hPa, humidity 50%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "Clear HIGH - Multiple severe factors",
      "description": "Major pressure drop + large temp change + high humidity",
      "weighted_score": 0.877,
      "expected": "HIGH",
      "predicted": "HIGH",
      "correct": true,
      "confidence": 0.95,
      "rationale": "Multiple high-weight factors exceed thresholds: pressure change (high risk), humidity extremes (very high at 92%), temperature average is moderate but low pressure system (<1005 hPa) and cloud cover (95%) contribute significantly.",
      "analysis": "The weather shows a combination of high-risk factors including low pressure (<995 hPa), humidity at 92% (extreme), and cloud cover at 95%, all of which are significant migraine triggers. The weighted score exceeds the threshold for a HIGH risk classification.",
      "adjusted_thresholds": {
        "high": 0.7,
        "medium": 0.4
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a migraine risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON.\n\nMIGRAINE TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% or \u226430% is moderate risk, \u226585% or \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk, \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights):\n- Pressure change: 30% (most important - rapid pressure changes are the strongest migraine trigger)\n- Temperature change: 25% (rapid temperature swings trigger migraines)\n- Low pressure: 15% (low pressure systems increase migraine risk)\n- Humidity extremes: 15% (very high or very low humidity)\n- Cloud cover: 10% (overcast conditions affect some people)\n- Precipitation: 5% (rain and storms can contribute)\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (pressure drops, temperature swings) are more important than absolute values\n- Changes can be positive (+) or negative (-), indicating direction of change\n- Consider both the magnitude of changes AND the min/max ranges provided\n- Large ranges (e.g., temperature_range, pressure_range) indicate weather instability\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Clear HIGH - Multiple severe factors\nRisk scores: {\"temperature_change\": 0.9, \"humidity_extreme\": 0.85, \"pressure_change\": 0.95, \"pressure_low\": 0.8, \"precipitation\": 0.6, \"cloud_cover\": 0.9, \"weights\": {\"temperature_change\": 0.25, \"humidity_extreme\": 0.15, \"pressure_change\": 0.3, \"pressure_low\": 0.15, \"precipitation\": 0.05, \"cloud_cover\": 0.1}}\nWeighted score: 0.88 (LOW<0.40, MEDIUM:0.40-0.69, HIGH\u22650.70)\nWeather: temp avg 8.0\u00b0C, pressure avg 992.0hPa, humidity 92%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "Boundary MEDIUM (low end)",
      "description": "Just above LOW threshold (0.40)",
      "weighted_score": 0.42,
      "expected": "MEDIUM",
      "predicted": "MEDIUM",
      "correct": true,
      "confidence": 0.65,
      "rationale": "The weighted score of 0.42 falls within the medium range (0.40-0.69). While humidity is at a moderate risk level, the combination of temperature change and pressure change factors contribute significantly to the overall risk. The actual weather conditions show a moderate temperature (15\u00b0C) and normal humidity, but the pressure change factor is notable.",
      "analysis": "The weighted score of 0.42 indicates a medium risk level for migraine triggers based on the provided factors and thresholds. Temperature change (0.4) slightly exceeds moderate risk, while pressure change (0.5) is a significant high-risk factor contributing to the overall medium probability.",
      "adjusted_thresholds": {
        "high": 0.7,
        "medium": 0.4
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a migraine risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON.\n\nMIGRAINE TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% or \u226430% is moderate risk, \u226585% or \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk, \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights):\n- Pressure change: 30% (most important - rapid pressure changes are the strongest migraine trigger)\n- Temperature change: 25% (rapid temperature swings trigger migraines)\n- Low pressure: 15% (low pressure systems increase migraine risk)\n- Humidity extremes: 15% (very high or very low humidity)\n- Cloud cover: 10% (overcast conditions affect some people)\n- Precipitation: 5% (rain and storms can contribute)\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (pressure drops, temperature swings) are more important than absolute values\n- Changes can be positive (+) or negative (-), indicating direction of change\n- Consider both the magnitude of changes AND the min/max ranges provided\n- Large ranges (e.g., temperature_range, pressure_range) indicate weather instability\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Boundary MEDIUM (low end)\nRisk scores: {\"temperature_change\": 0.4, \"humidity_extreme\": 0.5, \"pressure_change\": 0.5, \"pressure_low\": 0.3, \"precipitation\": 0.2, \"cloud_cover\": 0.4, \"weights\": {\"temperature_change\": 0.25, \"humidity_extreme\": 0.15, \"pressure_change\": 0.3, \"pressure_low\": 0.15, \"precipitation\": 0.05, \"cloud_cover\": 0.1}}\nWeighted score: 0.42 (LOW<0.40, MEDIUM:0.40-0.69, HIGH\u22650.70)\nWeather: temp avg 15.0\u00b0C, pressure avg 1003.0hPa, humidity 72%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "Boundary MEDIUM (high end)",
      "description": "Just below HIGH threshold (0.70)",
      "weighted_score": 0.707,
      "expected": "HIGH",
      "predicted": "HIGH",
      "correct": true,
      "confidence": 0.85,
      "rationale": "Multiple high-weight risk factors exceed thresholds: pressure change (0.8) and humidity extremes (0.75) both surpass moderate risk thresholds, with temperature change at 0.7 nearing medium threshold. Combined weighted score of 0.71 indicates high risk.",
      "analysis": "The weather conditions show significant risks: pressure dropped moderately (998hPa) but low pressure threshold was not met, humidity is high at 85% indicating extreme levels, and temperature change of 0.7 suggests approaching medium risk but combined with other factors pushes overall score above high threshold.",
      "adjusted_thresholds": {
        "high": 0.7,
        "medium": 0.4
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a migraine risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON.\n\nMIGRAINE TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% or \u226430% is moderate risk, \u226585% or \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk, \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights):\n- Pressure change: 30% (most important - rapid pressure changes are the strongest migraine trigger)\n- Temperature change: 25% (rapid temperature swings trigger migraines)\n- Low pressure: 15% (low pressure systems increase migraine risk)\n- Humidity extremes: 15% (very high or very low humidity)\n- Cloud cover: 10% (overcast conditions affect some people)\n- Precipitation: 5% (rain and storms can contribute)\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (pressure drops, temperature swings) are more important than absolute values\n- Changes can be positive (+) or negative (-), indicating direction of change\n- Consider both the magnitude of changes AND the min/max ranges provided\n- Large ranges (e.g., temperature_range, pressure_range) indicate weather instability\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Boundary MEDIUM (high end)\nRisk scores: {\"temperature_change\": 0.7, \"humidity_extreme\": 0.75, \"pressure_change\": 0.8, \"pressure_low\": 0.6, \"precipitation\": 0.4, \"cloud_cover\": 0.7, \"weights\": {\"temperature_change\": 0.25, \"humidity_extreme\": 0.15, \"pressure_change\": 0.3, \"pressure_low\": 0.15, \"precipitation\": 0.05, \"cloud_cover\": 0.1}}\nWeighted score: 0.71 (LOW<0.40, MEDIUM:0.40-0.69, HIGH\u22650.70)\nWeather: temp avg 10.0\u00b0C, pressure avg 998.0hPa, humidity 85%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "Boundary HIGH (low end)",
      "description": "Just at HIGH threshold (0.70)",
      "weighted_score": 0.772,
      "expected": "HIGH",
      "predicted": "HIGH",
      "correct": true,
      "confidence": 0.95,
      "rationale": "The weighted score of 0.77 exceeds the threshold for high risk (\u22650.70). Multiple significant factors are present: humidity extreme at 88% which is high risk, pressure change of 0.85 indicating a strong low-pressure system (low pressure threshold), and cloud cover at 95% which is high risk. Temperature change, while moderate, does not significantly impact the overall high-risk classification due to dominant factors.",
      "analysis": "The weather conditions show a combination of high humidity (88%), low pressure (<995 hPa), and overcast skies (95% cloud cover). These factors strongly indicate a high risk of migraine onset. Temperature change is moderate but does not outweigh the significant impact of humidity, pressure changes, and cloud cover.",
      "adjusted_thresholds": {
        "high": 0.7,
        "medium": 0.4
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a migraine risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON.\n\nMIGRAINE TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% or \u226430% is moderate risk, \u226585% or \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk, \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights):\n- Pressure change: 30% (most important - rapid pressure changes are the strongest migraine trigger)\n- Temperature change: 25% (rapid temperature swings trigger migraines)\n- Low pressure: 15% (low pressure systems increase migraine risk)\n- Humidity extremes: 15% (very high or very low humidity)\n- Cloud cover: 10% (overcast conditions affect some people)\n- Precipitation: 5% (rain and storms can contribute)\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (pressure drops, temperature swings) are more important than absolute values\n- Changes can be positive (+) or negative (-), indicating direction of change\n- Consider both the magnitude of changes AND the min/max ranges provided\n- Large ranges (e.g., temperature_range, pressure_range) indicate weather instability\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Boundary HIGH (low end)\nRisk scores: {\"temperature_change\": 0.75, \"humidity_extreme\": 0.8, \"pressure_change\": 0.85, \"pressure_low\": 0.7, \"precipitation\": 0.5, \"cloud_cover\": 0.8, \"weights\": {\"temperature_change\": 0.25, \"humidity_extreme\": 0.15, \"pressure_change\": 0.3, \"pressure_low\": 0.15, \"precipitation\": 0.05, \"cloud_cover\": 0.1}}\nWeighted score: 0.77 (LOW<0.40, MEDIUM:0.40-0.69, HIGH\u22650.70)\nWeather: temp avg 7.0\u00b0C, pressure avg 995.0hPa, humidity 88%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "High pressure change only",
      "description": "Single dominant factor (pressure change 30% weight)",
      "weighted_score": 0.39,
      "expected": "LOW",
      "predicted": "LOW",
      "correct": true,
      "confidence": 0.95,
      "rationale": "The weighted score of 0.39 falls below the LOW threshold of 0.40, indicating a low overall migraine risk despite high pressure change being present.",
      "analysis": "The weather conditions show a significant high-pressure change (0.95) which is the most important factor, but other factors like humidity and precipitation are below threshold levels. The overall weighted score remains low.",
      "adjusted_thresholds": {
        "high": 0.7,
        "medium": 0.4
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a migraine risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON.\n\nMIGRAINE TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% or \u226430% is moderate risk, \u226585% or \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk, \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights):\n- Pressure change: 30% (most important - rapid pressure changes are the strongest migraine trigger)\n- Temperature change: 25% (rapid temperature swings trigger migraines)\n- Low pressure: 15% (low pressure systems increase migraine risk)\n- Humidity extremes: 15% (very high or very low humidity)\n- Cloud cover: 10% (overcast conditions affect some people)\n- Precipitation: 5% (rain and storms can contribute)\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (pressure drops, temperature swings) are more important than absolute values\n- Changes can be positive (+) or negative (-), indicating direction of change\n- Consider both the magnitude of changes AND the min/max ranges provided\n- Large ranges (e.g., temperature_range, pressure_range) indicate weather instability\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: High pressure change only\nRisk scores: {\"temperature_change\": 0.1, \"humidity_extreme\": 0.1, \"pressure_change\": 0.95, \"pressure_low\": 0.2, \"precipitation\": 0.1, \"cloud_cover\": 0.3, \"weights\": {\"temperature_change\": 0.25, \"humidity_extreme\": 0.15, \"pressure_change\": 0.3, \"pressure_low\": 0.15, \"precipitation\": 0.05, \"cloud_cover\": 0.1}}\nWeighted score: 0.39 (LOW<0.40, MEDIUM:0.40-0.69, HIGH\u22650.70)\nWeather: temp avg 18.0\u00b0C, pressure avg 1008.0hPa, humidity 55%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "London example (reported as HIGH)",
      "description": "Real-world case that was misclassified",
      "weighted_score": 0.468,
      "expected": "MEDIUM",
      "predicted": "HIGH",
      "correct": false,
      "confidence": 0.85,
      "rationale": "Multiple high-weight risk factors exceed thresholds: pressure change (+5.8 hPa) and humidity extremes (high at 84%). Temperature change is moderate but pressure changes are the strongest trigger.",
      "analysis": "The weather shows significant risk factors: a notable pressure increase (+5.8 hPa) and humidity at 84% (high). These factors, weighted heavily due to their importance in migraine triggers, push the overall risk above the threshold for a HIGH probability.",
      "adjusted_thresholds": {
        "high": 0.7,
        "medium": 0.4
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a migraine risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON.\n\nMIGRAINE TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% or \u226430% is moderate risk, \u226585% or \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk, \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights):\n- Pressure change: 30% (most important - rapid pressure changes are the strongest migraine trigger)\n- Temperature change: 25% (rapid temperature swings trigger migraines)\n- Low pressure: 15% (low pressure systems increase migraine risk)\n- Humidity extremes: 15% (very high or very low humidity)\n- Cloud cover: 10% (overcast conditions affect some people)\n- Precipitation: 5% (rain and storms can contribute)\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (pressure drops, temperature swings) are more important than absolute values\n- Changes can be positive (+) or negative (-), indicating direction of change\n- Consider both the magnitude of changes AND the min/max ranges provided\n- Large ranges (e.g., temperature_range, pressure_range) indicate weather instability\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: London example (reported as HIGH)\nRisk scores: {\"cloud_cover\": 1.0, \"humidity_extreme\": 0.53, \"precipitation\": 0.18, \"pressure_change\": 0.71, \"pressure_low\": 0.26, \"temperature_change\": 0.11, \"weights\": {\"temperature_change\": 0.25, \"humidity_extreme\": 0.15, \"pressure_change\": 0.3, \"pressure_low\": 0.15, \"precipitation\": 0.05, \"cloud_cover\": 0.1}}\nWeighted score: 0.47 (LOW<0.40, MEDIUM:0.40-0.69, HIGH\u22650.70)\nWeather: temp avg 12.9\u00b0C, pressure avg 1001.2hPa, humidity 84%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "Thessaloniki example (reported as HIGH)",
      "description": "Real-world case with weighted score 0.36",
      "weighted_score": 0.376,
      "expected": "LOW",
      "predicted": "LOW",
      "correct": true,
      "confidence": 0.85,
      "rationale": "The weighted score of 0.38 falls below the LOW threshold of 0.40, indicating a low overall migraine risk despite some contributing factors.",
      "analysis": "The weather conditions show moderate humidity but lack significant pressure changes or precipitation. Temperature change is minimal, and cloud cover is not extreme.",
      "adjusted_thresholds": {
        "high": 0.7,
        "medium": 0.4
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a migraine risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON.\n\nMIGRAINE TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% or \u226430% is moderate risk, \u226585% or \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk, \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights):\n- Pressure change: 30% (most important - rapid pressure changes are the strongest migraine trigger)\n- Temperature change: 25% (rapid temperature swings trigger migraines)\n- Low pressure: 15% (low pressure systems increase migraine risk)\n- Humidity extremes: 15% (very high or very low humidity)\n- Cloud cover: 10% (overcast conditions affect some people)\n- Precipitation: 5% (rain and storms can contribute)\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (pressure drops, temperature swings) are more important than absolute values\n- Changes can be positive (+) or negative (-), indicating direction of change\n- Consider both the magnitude of changes AND the min/max ranges provided\n- Large ranges (e.g., temperature_range, pressure_range) indicate weather instability\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Thessaloniki example (reported as HIGH)\nRisk scores: {\"cloud_cover\": 1.0, \"humidity_extreme\": 0.81, \"precipitation\": 0.42, \"pressure_change\": 0.41, \"pressure_low\": 0.0, \"temperature_change\": 0.04, \"weights\": {\"temperature_change\": 0.25, \"humidity_extreme\": 0.15, \"pressure_change\": 0.3, \"pressure_low\": 0.15, \"precipitation\": 0.05, \"cloud_cover\": 0.1}}\nWeighted score: 0.38 (LOW<0.40, MEDIUM:0.40-0.69, HIGH\u22650.70)\nWeather: temp avg 15.5\u00b0C, pressure avg 1010.2hPa, humidity 94%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    }
  ],
  "sinusitis_tests": [
    {
      "scenario_name": "Clear LOW - Minimal risk",
      "description": "Perfect weather for sinuses",
      "weighted_score": 0.0,
      "expected": "LOW",
      "predicted": "LOW",
      "correct": true,
      "confidence": 0.95,
      "rationale": "All weather factors are within normal ranges with no significant changes observed. Temperature change is 0\u00b0C, humidity at moderate level (50%), pressure stable at 1013 hPa with no low-pressure systems (<995hPa), and precipitation absent. Cloud cover is clear (0%). No high-risk factors detected.",
      "analysis": "The weather conditions are stable with no significant temperature fluctuations, humidity within moderate range, pressure steady at normal levels, and precipitation absent. All factors are below the defined thresholds for moderate or high risk.",
      "adjusted_thresholds": {
        "high": 0.65,
        "medium": 0.35
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a sinusitis risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON. Focus on sinusitis triggers: rapid temperature changes, humidity extremes (high promotes allergens/mold, low dries sinuses), barometric pressure changes, and precipitation (increases allergens).\n\nSINUSITIS TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% is moderate risk (promotes mold/allergens), \u226585% is high risk\n- Humidity: \u226430% is moderate risk (dries sinuses), \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk (increases allergens), \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights for sinusitis):\n- Temperature change: 30% (most important for sinusitis)\n- Humidity extremes: 25% (very important - affects allergens/mold and sinus dryness)\n- Pressure change: 20%\n- Precipitation: 10% (increases allergens)\n- Low pressure: 10%\n- Cloud cover: 5%\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (humidity swings, temperature changes) are more important than absolute values\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Clear LOW - Minimal risk\nRisk scores: {\"temperature_change\": 0.0, \"humidity_extreme\": 0.0, \"pressure_change\": 0.0, \"pressure_low\": 0.0, \"precipitation\": 0.0, \"cloud_cover\": 0.0, \"weights\": {\"temperature_change\": 0.3, \"humidity_extreme\": 0.25, \"pressure_change\": 0.2, \"pressure_low\": 0.1, \"precipitation\": 0.1, \"cloud_cover\": 0.05}}\nWeighted score: 0.00 (LOW<0.35, MEDIUM:0.35-0.64, HIGH\u22650.65)\nWeather: pressure avg 1013.0hPa, humidity 50%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "Clear HIGH - Humidity and temp change",
      "description": "High humidity + temperature change (key sinusitis triggers)",
      "weighted_score": 0.808,
      "expected": "HIGH",
      "predicted": "HIGH",
      "correct": true,
      "confidence": 0.95,
      "rationale": "Multiple high-weight factors exceed thresholds: humidity extreme (92%), temperature change moderate/high, precipitation high, and pressure low. These factors significantly increase sinusitis risk.",
      "analysis": "The weather conditions show extreme humidity (92%), rapid temperature change, low pressure (<995hPa), and precipitation. These factors strongly contribute to sinusitis risk due to mold/mold spore proliferation, sinus drying, and allergen exposure.",
      "adjusted_thresholds": {
        "high": 0.65,
        "medium": 0.35
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a sinusitis risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON. Focus on sinusitis triggers: rapid temperature changes, humidity extremes (high promotes allergens/mold, low dries sinuses), barometric pressure changes, and precipitation (increases allergens).\n\nSINUSITIS TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% is moderate risk (promotes mold/allergens), \u226585% is high risk\n- Humidity: \u226430% is moderate risk (dries sinuses), \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk (increases allergens), \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights for sinusitis):\n- Temperature change: 30% (most important for sinusitis)\n- Humidity extremes: 25% (very important - affects allergens/mold and sinus dryness)\n- Pressure change: 20%\n- Precipitation: 10% (increases allergens)\n- Low pressure: 10%\n- Cloud cover: 5%\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (humidity swings, temperature changes) are more important than absolute values\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Clear HIGH - Humidity and temp change\nRisk scores: {\"temperature_change\": 0.9, \"humidity_extreme\": 0.95, \"pressure_change\": 0.7, \"pressure_low\": 0.5, \"precipitation\": 0.8, \"cloud_cover\": 0.6, \"weights\": {\"temperature_change\": 0.3, \"humidity_extreme\": 0.25, \"pressure_change\": 0.2, \"pressure_low\": 0.1, \"precipitation\": 0.1, \"cloud_cover\": 0.05}}\nWeighted score: 0.81 (LOW<0.35, MEDIUM:0.35-0.64, HIGH\u22650.65)\nWeather: pressure avg 998.0hPa, humidity 92%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    },
    {
      "scenario_name": "Boundary MEDIUM (sinusitis)",
      "description": "Just above LOW threshold (0.35)",
      "weighted_score": 0.365,
      "expected": "MEDIUM",
      "predicted": "MEDIUM",
      "correct": true,
      "confidence": 0.65,
      "rationale": "The weighted score of 0.36 falls within the MEDIUM range (0.35-0.64). Key factors contributing to this include high humidity (75%) which promotes allergen/mold growth and sinus dryness, moderate temperature change risk, and significant pressure changes. While precipitation is present at 75%, it's not extreme enough to significantly impact risk.",
      "analysis": "The weather conditions show moderate humidity levels (75%) which can promote allergen and mold growth, potentially exacerbating sinus issues. Temperature changes are moderate but not extreme enough to be high risk alone. Pressure changes, though present at 1002 hPa which is slightly below average pressure threshold for high risk (<995hPa), are moderate in impact. The combination of these factors, especially humidity and pressure changes, leads to a medium risk classification.",
      "adjusted_thresholds": {
        "high": 0.65,
        "medium": 0.35
      },
      "request_payload": {
        "model": "granite-4.0-h-tiny-mlx",
        "messages": [
          {
            "role": "system",
            "content": "You are a sinusitis risk assessor. Analyze weather conditions and output ONLY valid JSON matching the schema below. Do not include any text before or after the JSON. Focus on sinusitis triggers: rapid temperature changes, humidity extremes (high promotes allergens/mold, low dries sinuses), barometric pressure changes, and precipitation (increases allergens).\n\nSINUSITIS TRIGGER THRESHOLDS:\n- Temperature change: \u22655\u00b0C is moderate risk, \u226510\u00b0C is high risk\n- Humidity: \u226570% is moderate risk (promotes mold/allergens), \u226585% is high risk\n- Humidity: \u226430% is moderate risk (dries sinuses), \u226420% is high risk\n- Humidity change: \u226510 percentage points is moderate risk, \u226520 is high risk\n- Pressure change: \u22655 hPa is moderate risk, \u226510 hPa is high risk\n- Low pressure: <1005 hPa is moderate risk, <995 hPa is high risk\n- Precipitation: \u22655mm is moderate risk (increases allergens), \u226510mm is high risk\n- Cloud cover: \u226580% is moderate risk, \u226595% is high risk\n\nRISK FACTOR IMPORTANCE (weights for sinusitis):\n- Temperature change: 30% (most important for sinusitis)\n- Humidity extremes: 25% (very important - affects allergens/mold and sinus dryness)\n- Pressure change: 20%\n- Precipitation: 10% (increases allergens)\n- Low pressure: 10%\n- Cloud cover: 5%\n\nCLASSIFICATION GUIDELINES:\n- Use the weighted score provided as a starting point\n- LOW: weighted score < 0.4 (most predictions should be LOW)\n- MEDIUM: weighted score 0.4-0.69\n- HIGH: weighted score \u2265 0.7 (only when multiple high-weight factors exceed thresholds)\n- Focus on ACTUAL WEATHER VALUES and CHANGES, not normalized scores\n- Weather CHANGES (humidity swings, temperature changes) are more important than absolute values\n- Previous predictions are for context only - do not blindly follow patterns\n- Be conservative: only predict HIGH when there's clear evidence of multiple risk factors\n\n<schema>\n{\n  \"probability_level\": \"LOW\" | \"MEDIUM\" | \"HIGH\",\n  \"confidence\": <float between 0 and 1>,\n  \"rationale\": \"<brief explanation>\",\n  \"analysis_text\": \"<concise user explanation>\",\n  \"prevention_tips\": [\"<tip1>\", \"<tip2>\", ...]\n}\n</schema>"
          },
          {
            "role": "user",
            "content": "Location: Test: Boundary MEDIUM (sinusitis)\nRisk scores: {\"temperature_change\": 0.4, \"humidity_extreme\": 0.5, \"pressure_change\": 0.3, \"pressure_low\": 0.2, \"precipitation\": 0.3, \"cloud_cover\": 0.2, \"weights\": {\"temperature_change\": 0.3, \"humidity_extreme\": 0.25, \"pressure_change\": 0.2, \"pressure_low\": 0.1, \"precipitation\": 0.1, \"cloud_cover\": 0.05}}\nWeighted score: 0.36 (LOW<0.35, MEDIUM:0.35-0.64, HIGH\u22650.65)\nWeather: pressure avg 1002.0hPa, humidity 75%"
          }
        ],
        "temperature": 0.2
      },
      "error": null
    }
  ],
  "summary": {
    "migraine_accuracy": 0.875,
    "migraine_correct": 7,
    "migraine_total": 8,
    "migraine_errors": 0,
    "sinusitis_accuracy": 1.0,
    "sinusitis_correct": 3,
    "sinusitis_total": 3,
    "sinusitis_errors": 0,
    "overall_accuracy": 0.9090909090909091,
    "total_correct": 10,
    "total_tests": 11,
    "total_errors": 0
  }
}